<!DOCTYPE html>
<html lang="en">
<head>
    <title>Browser</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://vjs.zencdn.net/7.7.4/video-js.css" rel="stylesheet"/>

    <!-- Bootstrap CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

</head>

<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-8">
            <div id="elm-app-is-loaded-here"></div>
        </div>
        <div class="col-lg-4">
            <video
                    id="mainPlayer"
                    class="video-js vjs-default-skin"
                    controls
                    width="640" height="480"
                    data-setup='{ "techOrder": ["youtube"] }'
            >
                <source src=""/>
            </video>
        </div>

    </div>
</div>
<script src="https://vjs.zencdn.net/7.7.4/video.js"></script>
<script src="Youtube.min.js"></script>
<script src="compiled.js"></script>
<script>
    let app = Elm.Main.init({
        node: document.getElementById("elm-app-is-loaded-here")
    });


    app.ports.sendUrlWithOptions.subscribe(function (urlWithOptions) {
        const player = videojs.players.mainPlayer;
        player.src({src: urlWithOptions.url, type: 'video/youtube'});
        player.loop(urlWithOptions.options.loop);
        if (urlWithOptions.options.play)
            player.play();
        player.on("ended", (_) => app.ports.videoEnded.send("ended"));
    });

    app.ports.sendOptions.subscribe(function (options) {
        const player = videojs.players.mainPlayer;
        player.loop(options.loop);
    });

</script>
</body>
</html>
